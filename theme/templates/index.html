{% extends "base.html" %}

{% block content %}
	<div class="posts">
		{% for article in articles_page.object_list %}
			{% if article.cover %}
				{% if article.cover|lower|truncate(4, True, '') == "http" %}
					{% set selected_cover = article.cover %}
				{% elif article.cover.startswith('/') %}
					{% set selected_cover = SITEURL+article.cover %}
				{% else %}
					{% set selected_cover = SITEURL+"/"+article.cover %}
				{% endif %}
			{% endif %}
			<div class="post">
				<h1 class="post-title" href="{{ SITEURL }}/{{ article.url }}">
					<a href="{{ SITEURL }}/{{ article.url }}">{{ article.title }}</a>
				</h1>
				<span class="post-date">{{ article.locale_date }}</span>
				{% if selected_cover %}
				<div class="post-cover cover"
				    style="background-image: url('{{ selected_cover }}');">
				</div>
				{% endif %}	
					
				<p>
				{% if article.has_summary %}
					{{ article.summary }}
				{% elif article.summary %}
					{{ article.summary|striptags|truncate(250) }}
				{% endif %}
				</p>
				<a class="read-more" href="{{ article.url }}">Czytaj dalej Â»</a>
			</div>
		{% endfor %}
	</div>
	{% if DEFAULT_PAGINATION %}
	<div class="pagination">

		{% if articles_page.has_previous() %}
		{% set num = articles_page.previous_page_number() %}
		<span class="pagination-item"><a href="{{ SITEURL }}/{{ page_name }}{{ num if num > 1 else '' }}.html">Nowsze wpisy</a></span>
		{% else %}
		<span class="pagination-item">Nowsze wpisy</span>
		{% endif %}

		{% if articles_page.has_next() %}
		<span class="pagination-item"><a href="{{ SITEURL }}/{{ page_name }}{{ articles_page.next_page_number() }}.html">Starsze wpisy</a></span>
		{% else %}
		<span class="pagination-item">Starsze wpisy</span>
		{% endif %}
	</div>
	{% endif %}
{% endblock %}
